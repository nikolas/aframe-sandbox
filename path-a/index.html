<html>
    <head>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

        <style type="text/css">
        .vid-menu {
            position: absolute;
            left: 16px;
            bottom: 16px;
        }
        </style>

        <script src="https://aframe.io/releases/1.2.0/aframe.js"></script>
        <script src="https://unpkg.com/aframe-event-set-component@3.0.3/dist/aframe-event-set-component.min.js"></script>

        <script>
        AFRAME.registerComponent('menu', {
            init: function() {
            }
        });

        AFRAME.registerComponent('hotspot1', {
            init: function() {
                console.log('hi!');
                this.el.addEventListener('click', function() {
                    console.log('click!');

                });
            }
        });

        AFRAME.registerComponent('travelVideo', {
            init: function() {
                console.log('travelVid init!');

                this.el.addEventListener('click', function() {
                    console.log('travelVideo click!');
                    // 1. play new video

                    // 2. show hotspot
                });
            }
        });

        document.addEventListener('DOMContentLoaded', function(event) {
            const vrButton = document.querySelector('.a-enter-vr');
            console.log('vrButton', vrButton);
            if (vrButton) {
                vrButton.remove();
            }

            const video = document.getElementById('videoTravel');
            video.play();

            document.getElementById('play-button')
                    .addEventListener('click', function() {
                        video.play();
                    });

            document.getElementById('pause-button')
                    .addEventListener('click', function() {
                        video.pause();
                    });
        });
        </script>
    </head>
    <body>
        <a-scene cursor="rayOrigin: mouse" raycaster="objects: .collidable" device-orientation-permission-ui="enabled: false">
            <a-assets>

                <video id="videoTravel" preload="auto"
                       src="../assets/360proto-Travel1.mp4"
                       travelVideo
                       width="160" height="90" autoplay loop="false"
                       crossOrigin="anonymous"></video>

                <video id="videoLocation" preload="auto"
                       src="../assets/360proto-Loca1.mp4"
                       width="160" height="90" autoplay loop="true"
                       crossOrigin="anonymous"></video>
            </a-assets>

            <a-videosphere id="demo-video-container" src="#videoTravel"></a-videosphere>

            <!--<a-sky src="assets/puydesancy.jpg" rotation="0 -130 0"></a-sky>-->

            <!--<a-text font="kelsonsans" value="Puy de Sancy, France" width="6" position="-2.5 0.25 -1.5"
                 rotation="0 15 0"></a-text>-->

            <a-box class="collidable hidden"
                   position="-4 0.5 0"
                   rotation="0 0 0"
                   visible="false"
                   color="#4CC3D9"
                   hotspot1
                   event-set__enter="_event: mouseenter; color: #8FF7FF"
                   event-set__leave="_event: mouseleave; color: #4CC3D9">
                <a-text id="boxText" value="This is a box" align="center" color="#FFF" visible="false" position="0 -0.55 0.55"
                         geometry="primitive: plane; width: 1.75" material="color: #333"></a-text>
            </a-box>

            <a-camera wasd-controls-enabled="false">
                <a-entity material="shader: flat; src: #videoTravel"
                          geometry="primitive: plane; width: 160; height: 90;"
                          position="0 60 -250"
                          rotation="0 35 0"
                          play-on-click
                          visible="false">
                </a-entity>
                <a-cursor></a-cursor>
            </a-camera>

            <!--<a-box color="tomato" depth="2" height="4" width="0.5"></a-box>

            <a-sphere position="0 1.25 -5" radius="1.25" color="#EF2D5E"></a-sphere>
            <a-cylinder position="1 0.75 -3" radius="0.5" height="1.5" color="#FFC65D"></a-cylinder>-->
            <!--<a-plane menu position="0 0 -4" rotation="-90 0 0" width="10" height="4" color="#7BC8A4"></a-plane>-->

            <!--<a-octahedron color="#FF926B" radius="5"></a-octahedron>-->

            <!--<a-sky color="#ECECEC"></a-sky>-->

            <!--<a-entity camera="active: true" look-controls wasd-controls
                      position="0 1.6 0" data-aframe-default-camera></a-entity>
            <a-entity camera look-controls wasd-controls="acceleration:100" position="0 1.6 0"></a-entity>-->

        </a-scene>
        <div class="vid-menu">
            <button class="btn btn-primary" id="play-button" name="play">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-play" viewBox="0 0 16 16">
                    <path d="M10.804 8 5 4.633v6.734L10.804 8zm.792-.696a.802.802 0 0 1 0 1.392l-6.363 3.692C4.713 12.69 4 12.345 4 11.692V4.308c0-.653.713-.998 1.233-.696l6.363 3.692z"/>
                </svg>
                Play
            </button>
            <button class="btn btn-secondary" id="pause-button" name="pause">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pause" viewBox="0 0 16 16">
                    <path d="M6 3.5a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0V4a.5.5 0 0 1 .5-.5zm4 0a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0V4a.5.5 0 0 1 .5-.5z"/>
                </svg>
                Pause
            </button>

            <button class="btn btn-secondary" id="location-button" name="location">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-skip-forward" viewBox="0 0 16 16">
                    <path d="M15.5 3.5a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0V8.752l-6.267 3.636c-.52.302-1.233-.043-1.233-.696v-2.94l-6.267 3.636C.713 12.69 0 12.345 0 11.692V4.308c0-.653.713-.998 1.233-.696L7.5 7.248v-2.94c0-.653.713-.998 1.233-.696L15 7.248V4a.5.5 0 0 1 .5-.5zM1 4.633v6.734L6.804 8 1 4.633zm7.5 0v6.734L14.304 8 8.5 4.633z"/>
                </svg>
                Go to Location
            </button>
        </div>
    </body>
</html>
